@tailwind base;
@tailwind components;
@tailwind utilities;

/* ============================================================================
   XTRACT DESIGN SYSTEM - CSS VARIABLES
   ============================================================================ */

@layer base {
  :root {
    /* Colors - Polly Design System */
    --color-background: #ffffff;
    --color-text: #4d4d4d;
    --color-text-light: #808080;
    
    /* Primary Colors - Polly Palette */
    --color-primary-purple: #8E42EE;
    --color-primary-orange: #F78E12;
    --color-primary-pink: #EC4899;
    --color-primary-cyan: #06B6D4;
    --color-primary-red: #FF004D;
    --color-primary-blue: #3C5DE2;
    --color-primary-green: #24CF35;
    --color-primary-yellow: #F7E217;
    --color-primary-neutral: #808080;
    
    /* Secondary Colors */
    --color-secondary-purple: #936DC3;
    --color-secondary-orange: #D98C30;
    --color-secondary-pink: #D85C99;
    --color-secondary-cyan: #21A3B9;
    --color-secondary-red: #CC3361;
    --color-secondary-blue: #6173BD;
    
    /* Neutral Colors */
    --color-neutral-purple: #968AA6;
    --color-neutral-orange: #A18768;
    --color-neutral-pink: #AF859A;
    --color-neutral-cyan: #3A91A0;
    --color-neutral-red: #9F6073;
    --color-neutral-blue: #7A82A4;
    
    /* Default Primary (Purple) */
    --color-primary: #8E42EE;
    --color-primary-dark: #6A42EE;
    --color-primary-light: #936DC3;
    
    /* Accent Colors */
    --color-accent: #F78E12;
    --color-accent-dark: #D98C30;
    --color-accent-light: #A18768;
    
    /* Secondary UI */
    --color-secondary: #F9FAFB;
    --color-secondary-dark: #E5E7EB;
    
    /* UI Colors */
    --color-border: #E5E7EB;
    --color-light-gray: #d1d5db;
    --color-success: #24CF35;
    --color-warning: #F7E217;
    --color-error: #FF004D;
    --color-info: #3C5DE2;
    
    /* Shadows */
    --shadow-sm: 0 1px 2px 0 rgba(0, 0, 0, 0.05);
    --shadow-md: 0 4px 6px -1px rgba(0, 0, 0, 0.1), 0 2px 4px -1px rgba(0, 0, 0, 0.06);
    --shadow-lg: 0 10px 15px -3px rgba(0, 0, 0, 0.1), 0 4px 6px -2px rgba(0, 0, 0, 0.05);
    
    /* Border Radius */
    --radius-sm: 0.25rem;
    --radius-md: 0.375rem;
    --radius-lg: 0.5rem;
    
    /* Transitions */
    --transition-fast: 150ms;
    --transition-normal: 250ms;
    --transition-slow: 350ms;
    
    /* Spacing */
    --space-1: 0.25rem;
    --space-2: 0.5rem;
    --space-3: 0.75rem;
    --space-4: 1rem;
    --space-6: 1.5rem;
    --space-8: 2rem;
  }
  
  /* Dark Mode Theme (Optional) */
  @media (prefers-color-scheme: dark) {
    :root.dark-mode {
      --color-background: #121212;
      --color-text: #e4e4e7;
      --color-text-light: #a1a1aa;
      --color-secondary: #1f2937;
      --color-secondary-dark: #111827;
      --color-border: #374151;
    }
  }
}

/* ============================================================================
   BASE STYLES
   ============================================================================ */

@layer base {
  /* Set base font size to 14px (Xtract standard) */
  html {
    font-size: 14px;
  }
  
  html,
  body {
    @apply antialiased;
  }
  
  body {
    @apply text-text bg-background;
  }
  
  h1,
  h2,
  h3,
  h4,
  h5,
  h6 {
    @apply font-medium text-text;
  }
  
  /* Form Elements Base Styling */
  input,
  select,
  textarea {
    @apply bg-white border border-border rounded px-3 py-2 transition-colors;
  }
  
  input:focus,
  select:focus,
  textarea:focus {
    @apply ring-1 ring-primary ring-opacity-30 border-primary outline-none;
  }
}

/* ============================================================================
   ANIMATIONS
   ============================================================================ */

@keyframes slideUp {
  from {
    opacity: 0;
    transform: translateY(1rem);
  }
  to {
    opacity: 1;
    transform: translateY(0);
  }
}

.animate-slide-up {
  animation: slideUp 0.3s ease-out;
}

@keyframes pulse {
  0%,
  100% {
    opacity: 1;
  }
  50% {
    opacity: 0.5;
  }
}

@keyframes spin {
  from {
    transform: rotate(0deg);
  }
  to {
    transform: rotate(360deg);
  }
}

/* ============================================================================
   COMPONENT CLASSES
   ============================================================================ */

@layer components {
  /* ========== CARDS & SECTIONS ========== */
  
  .card {
    @apply bg-white border border-border rounded-lg p-4 shadow-sm;
  }
  
  .section {
    @apply bg-secondary p-4 rounded-md;
  }
  
  /* ========== ICONS ========== */
  
  /* Ensure icons don't have background colors */
  svg,
  img[class*="icon"],
  i[class*="icon"],
  .icon {
    background-color: transparent !important;
    background: none !important;
  }
  
  /* ========== BUTTONS - Polly Design System ========== */
  
  /* Primary Button - Polly Style */
  .btn-primary {
    background-color: color-mix(in srgb, var(--color-primary-purple) 80%, black 20%);
    color: #FFFFFF;
    border-radius: 0.5rem;
    font-size: 0.875rem;
    font-weight: 500;
    line-height: 1.25rem;
    transition: background-color 300ms ease-out;
    @apply py-2 px-5 shadow-sm;
  }
  
  .btn-primary:hover:not(:disabled) {
    background-color: color-mix(in srgb, var(--color-primary-purple) 60%, black 40%);
  }
  
  .btn-primary:active:not(:disabled),
  .btn-primary.pressed {
    background-color: color-mix(in srgb, var(--color-primary-purple) 50%, black 50%);
  }
  
  .btn-primary:focus-visible {
    outline: 1px solid color-mix(in srgb, var(--color-primary-purple) 60%, black 40%);
    outline-offset: 1px;
  }
  
  .btn-primary:disabled {
    background-color: color-mix(in srgb, var(--color-primary-neutral) 10%, white 90%);
    color: color-mix(in srgb, var(--color-primary-neutral) 40%, white 60%);
    cursor: not-allowed;
  }
  
  /* Secondary Button - Polly Style */
  .btn-secondary {
    background-color: #FFFFFF;
    color: color-mix(in srgb, var(--color-primary-neutral) 60%, black 40%);
    border: 1px solid color-mix(in srgb, var(--color-neutral-purple) 25%, white 75%);
    border-radius: 0.5rem;
    font-size: 0.875rem;
    font-weight: 500;
    line-height: 1.25rem;
    transition: background-color 300ms ease-out;
    @apply py-2 px-4;
  }
  
  .btn-secondary:hover:not(:disabled) {
    background-color: color-mix(in srgb, var(--color-primary-purple) 5%, white 95%);
  }
  
  .btn-secondary:active:not(:disabled) {
    background-color: color-mix(in srgb, var(--color-secondary-purple) 30%, white 70%);
    color: color-mix(in srgb, var(--color-neutral-purple) 60%, black 40%);
    border-color: color-mix(in srgb, var(--color-neutral-purple) 50%, white 50%);
  }
  
  .btn-secondary:focus-visible {
    outline: 1px solid color-mix(in srgb, var(--color-primary-neutral) 60%, black 40%);
    outline-offset: 1px;
  }
  
  .btn-secondary:disabled {
    background-color: color-mix(in srgb, var(--color-primary-neutral) 5%, white 95%);
    color: color-mix(in srgb, var(--color-primary-neutral) 25%, white 75%);
    border-color: color-mix(in srgb, var(--color-primary-neutral) 25%, white 75%);
    cursor: not-allowed;
  }
  
  /* Tertiary Button - Polly Style */
  .btn-tertiary {
    background-color: transparent;
    color: color-mix(in srgb, var(--color-primary-neutral) 60%, black 40%);
    border: none;
    border-radius: 0.5rem;
    font-size: 0.875rem;
    font-weight: 500;
    line-height: 1.25rem;
    transition: background-color 300ms ease-out;
    @apply py-2 px-4 shadow-none;
  }
  
  .btn-tertiary:hover:not(:disabled) {
    background-color: color-mix(in srgb, var(--color-neutral-purple) 10%, white 90%);
  }
  
  .btn-tertiary:active:not(:disabled) {
    background-color: color-mix(in srgb, var(--color-neutral-purple) 25%, white 75%);
  }
  
  .btn-tertiary:focus-visible {
    outline: 1px solid color-mix(in srgb, var(--color-primary-neutral) 60%, black 40%);
    outline-offset: 1px;
  }
  
  .btn-tertiary:disabled {
    background-color: color-mix(in srgb, var(--color-primary-neutral) 10%, white 90%);
    color: color-mix(in srgb, var(--color-primary-neutral) 40%, white 60%);
    cursor: not-allowed;
  }
  
  /* Elevated Button - Polly Style */
  .btn-elevated {
    background-color: #FFFFFF;
    color: color-mix(in srgb, var(--color-primary-neutral) 60%, black 40%);
    border: none;
    border-radius: 0.5rem;
    font-size: 0.875rem;
    font-weight: 500;
    line-height: 1.25rem;
    box-shadow: 0 2px 4px 0 rgba(0, 0, 0, 0.25);
    transition: background-color 300ms ease-out;
    @apply py-2 px-4;
  }
  
  .btn-elevated:hover:not(:disabled) {
    background-color: color-mix(in srgb, var(--color-primary-purple) 5%, white 95%);
  }
  
  .btn-elevated:active:not(:disabled) {
    background-color: color-mix(in srgb, var(--color-secondary-purple) 30%, white 70%);
  }
  
  .btn-elevated:focus-visible {
    outline: 1px solid color-mix(in srgb, var(--color-primary-neutral) 60%, black 40%);
    outline-offset: 1px;
  }
  
  .btn-elevated:disabled {
    background-color: color-mix(in srgb, var(--color-primary-neutral) 5%, white 95%);
    color: color-mix(in srgb, var(--color-primary-neutral) 40%, white 60%);
    box-shadow: none;
    cursor: not-allowed;
  }
  
  /* Tonal Button - Polly Style */
  .btn-tonal {
    background-color: color-mix(in srgb, var(--color-secondary-purple) 15%, white 85%);
    color: color-mix(in srgb, var(--color-secondary-purple) 60%, black 40%);
    border: none;
    border-radius: 0.5rem;
    font-size: 0.875rem;
    font-weight: 500;
    line-height: 1.25rem;
    transition: background-color 300ms ease-out;
    @apply py-2 px-4 shadow-none;
  }
  
  .btn-tonal:hover:not(:disabled) {
    background-color: color-mix(in srgb, var(--color-secondary-purple) 25%, white 75%);
  }
  
  .btn-tonal:active:not(:disabled),
  .btn-tonal.selected {
    background-color: color-mix(in srgb, var(--color-secondary-purple) 40%, white 60%);
    color: color-mix(in srgb, var(--color-neutral-purple) 60%, black 40%);
  }
  
  .btn-tonal:focus-visible {
    outline: 1px solid color-mix(in srgb, var(--color-primary-neutral) 60%, black 40%);
    outline-offset: 1px;
  }
  
  .btn-tonal:disabled {
    background-color: color-mix(in srgb, var(--color-primary-neutral) 5%, white 95%);
    color: color-mix(in srgb, var(--color-primary-neutral) 40%, white 60%);
    cursor: not-allowed;
  }
  
  /* Danger/Error Button - Polly Style */
  .btn-danger {
    background-color: color-mix(in srgb, var(--color-primary-red) 80%, black 20%);
    color: #FFFFFF;
    border: none;
    border-radius: 0.5rem;
    font-size: 0.875rem;
    font-weight: 500;
    line-height: 1.25rem;
    transition: background-color 300ms ease-out;
    @apply py-2 px-4 shadow-sm;
  }
  
  .btn-danger:hover:not(:disabled) {
    background-color: color-mix(in srgb, var(--color-primary-red) 60%, black 40%);
  }
  
  .btn-danger:active:not(:disabled) {
    background-color: color-mix(in srgb, var(--color-primary-red) 50%, black 50%);
  }
  
  .btn-danger:focus-visible {
    outline: 1px solid color-mix(in srgb, var(--color-primary-red) 60%, black 40%);
    outline-offset: 1px;
  }
  
  .btn-danger:disabled {
    background-color: color-mix(in srgb, var(--color-primary-neutral) 10%, white 90%);
    color: color-mix(in srgb, var(--color-primary-neutral) 40%, white 60%);
    cursor: not-allowed;
  }
  
  /* Legacy text button for backwards compatibility */
  .btn-text {
    @apply btn-tertiary;
  }
  
  /* Button Sizes */
  .btn-sm {
    @apply text-sm py-1 px-3;
  }
  
  .btn-md {
    @apply py-2 px-4;
  }
  
  .btn-lg {
    @apply text-lg py-3 px-6;
  }
  
  /* Button Loading State */
  .btn-loading {
    @apply opacity-70 cursor-not-allowed;
  }
  
  /* ========== FORMS ========== */
  
  .form-group {
    @apply mb-4;
  }
  
  .form-label {
    @apply block text-sm mb-1 font-medium text-text;
  }
  
  .form-control {
    @apply w-full bg-white border border-border rounded-sm px-3 py-2 transition-colors;
    @apply focus:ring-1 focus:ring-primary focus:ring-opacity-30 focus:border-primary outline-none;
  }
  
  .form-error {
    @apply text-error text-xs mt-1;
  }
  
  .form-help-text {
    @apply text-text-light text-xs mt-1;
  }
  
  /* ========== TABLES ========== */
  
  .table-container {
    @apply w-full overflow-hidden border border-border rounded-md;
  }
  
  .table {
    @apply w-full divide-y divide-border;
  }
  
  .table thead {
    @apply bg-secondary;
  }
  
  .table th {
    @apply py-3 px-4 text-left text-sm font-medium text-text;
  }
  
  .table td {
    @apply py-2 px-4 text-sm text-text whitespace-nowrap;
  }
  
  .table tbody tr {
    @apply bg-white border-b border-border hover:bg-secondary hover:bg-opacity-50;
  }
  
  /* ========== BADGES ========== */
  
  .badge {
    @apply inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium;
  }
  
  .badge-success {
    @apply bg-green-100 text-green-800;
  }
  
  .badge-warning {
    @apply bg-yellow-100 text-yellow-800;
  }
  
  .badge-error {
    @apply bg-red-100 text-red-800;
  }
  
  .badge-info {
    @apply bg-blue-100 text-blue-800;
  }
  
  .badge-primary {
    @apply bg-primary-light text-primary;
  }
  
  /* ========== ALERTS ========== */
  
  .alert {
    @apply p-3 rounded-sm shadow-xl border bg-white;
  }
  
  .alert-success {
    @apply border-l-4 border-l-success;
  }
  
  .alert-error {
    @apply border-l-4 border-l-error;
  }
  
  .alert-warning {
    @apply border-l-4 border-l-warning;
  }
  
  .alert-info {
    @apply border-l-4 border-l-info;
  }
  
  /* ========== PROCESSING INDICATOR ========== */
  
  .processing-indicator {
    position: absolute;
    display: block;
    width: 12px;
    height: 12px;
    border-radius: 50%;
    background-color: #fbbf24;
    box-shadow: 0 0 5px rgba(251, 191, 36, 0.7);
    animation: pulse 2s cubic-bezier(0.4, 0, 0.6, 1) infinite;
    pointer-events: none;
    z-index: 150;
  }
}

/* ============================================================================
   UTILITY CLASSES
   ============================================================================ */

@layer utilities {
  /* ========== SCROLLBARS ========== */
  
  .scrollbar-thin {
    scrollbar-width: thin;
  }
  
  .scrollbar-thin::-webkit-scrollbar {
    width: 8px;
    height: 8px;
  }
  
  .scrollbar-thumb-gray-300::-webkit-scrollbar-thumb {
    background-color: #d1d5db;
    border-radius: 0.25rem;
  }
  
  .scrollbar-track-gray-100::-webkit-scrollbar-track {
    background-color: #f3f4f6;
  }
  
  /* Firefox scrollbar support */
  @supports (scrollbar-width: thin) {
    .scrollbar-thin {
      scrollbar-width: thin;
      scrollbar-color: #d1d5db #f3f4f6;
    }
  }
  
  /* ========== COLUMN RESIZING ========== */
  
  .column-resizing,
  .column-resizing * {
    cursor: col-resize !important;
    user-select: none !important;
  }
  
  .react-resizable-handle {
    position: absolute;
    width: 10px;
    height: 100%;
    bottom: 0;
    right: -5px;
    cursor: col-resize;
    z-index: 30;
  }
}

/* ============================================================================
   GLOBAL SCROLLBAR STYLING
   ============================================================================ */

::-webkit-scrollbar {
  width: 8px;
  height: 8px;
}

::-webkit-scrollbar-track {
  background: #f3f4f6;
}

::-webkit-scrollbar-thumb {
  background: #d1d5db;
  border-radius: 4px;
}

::-webkit-scrollbar-thumb:hover {
  background: #2e2846;
}

/* ============================================================================
   FIREFOX-SPECIFIC FIXES
   ============================================================================ */

@-moz-document url-prefix() {
  table {
    border-collapse: collapse !important;
  }
  
  th,
  td {
    border-right: 1px solid rgba(0, 0, 0, 0.1);
  }
}
