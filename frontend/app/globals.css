@tailwind base;
@tailwind components;
@tailwind utilities;

/* ============================================================================
   XTRACT DESIGN SYSTEM - CSS VARIABLES
   ============================================================================ */

@layer base {
  :root {
    /* Colors - Light Mode */
    --color-background: #ffffff;
    --color-text: #4d4d4d;
    --color-text-light: #6b7280;
    
    /* Primary Colors */
    --color-primary: #2e2846;
    --color-primary-dark: #000000;
    --color-primary-light: #e3dff8;
    
    /* Accent Colors */
    --color-accent: #c2f3c5;
    --color-accent-dark: #035e6e;
    --color-accent-light: #d4e1ff;
    
    /* Secondary Colors */
    --color-secondary: #eff1f8;
    --color-secondary-dark: #dfe3f3;
    
    /* UI Colors */
    --color-border: #dfd3ed;
    --color-light-gray: #d1d5db;
    --color-success: #6db89f;
    --color-warning: #d3b582;
    --color-error: #ef9595;
    --color-info: #95aee7;
    
    /* Shadows */
    --shadow-sm: 0 1px 2px 0 rgba(0, 0, 0, 0.05);
    --shadow-md: 0 4px 6px -1px rgba(0, 0, 0, 0.1), 0 2px 4px -1px rgba(0, 0, 0, 0.06);
    --shadow-lg: 0 10px 15px -3px rgba(0, 0, 0, 0.1), 0 4px 6px -2px rgba(0, 0, 0, 0.05);
    
    /* Border Radius */
    --radius-sm: 0.25rem;
    --radius-md: 0.375rem;
    --radius-lg: 0.5rem;
    
    /* Transitions */
    --transition-fast: 150ms;
    --transition-normal: 250ms;
    --transition-slow: 350ms;
    
    /* Spacing */
    --space-1: 0.25rem;
    --space-2: 0.5rem;
    --space-3: 0.75rem;
    --space-4: 1rem;
    --space-6: 1.5rem;
    --space-8: 2rem;
  }
  
  /* Dark Mode Theme (Optional) */
  @media (prefers-color-scheme: dark) {
    :root.dark-mode {
      --color-background: #121212;
      --color-text: #e4e4e7;
      --color-text-light: #a1a1aa;
      --color-secondary: #1f2937;
      --color-secondary-dark: #111827;
      --color-border: #374151;
    }
  }
}

/* ============================================================================
   BASE STYLES
   ============================================================================ */

@layer base {
  /* Set base font size to 14px (Xtract standard) */
  html {
    font-size: 14px;
  }
  
  html,
  body {
    @apply antialiased;
  }
  
  body {
    @apply text-text bg-background;
  }
  
  h1,
  h2,
  h3,
  h4,
  h5,
  h6 {
    @apply font-medium text-text;
  }
  
  /* Form Elements Base Styling */
  input,
  select,
  textarea {
    @apply bg-white border border-border rounded px-3 py-2 transition-colors;
  }
  
  input:focus,
  select:focus,
  textarea:focus {
    @apply ring-1 ring-primary ring-opacity-30 border-primary outline-none;
  }
}

/* ============================================================================
   ANIMATIONS
   ============================================================================ */

@keyframes slideUp {
  from {
    opacity: 0;
    transform: translateY(1rem);
  }
  to {
    opacity: 1;
    transform: translateY(0);
  }
}

.animate-slide-up {
  animation: slideUp 0.3s ease-out;
}

@keyframes pulse {
  0%,
  100% {
    opacity: 1;
  }
  50% {
    opacity: 0.5;
  }
}

@keyframes spin {
  from {
    transform: rotate(0deg);
  }
  to {
    transform: rotate(360deg);
  }
}

/* ============================================================================
   COMPONENT CLASSES
   ============================================================================ */

@layer components {
  /* ========== CARDS & SECTIONS ========== */
  
  .card {
    @apply bg-white border border-border rounded-lg p-4 shadow-sm;
  }
  
  .section {
    @apply bg-secondary p-4 rounded-md;
  }
  
  /* ========== BUTTONS ========== */
  
  .btn-primary {
    background-color: var(--color-primary-light);
    color: var(--color-primary-dark);
    @apply py-2 px-4 rounded-sm shadow-sm transition-colors;
    @apply hover:ring-1 hover:ring-primary;
    @apply focus:ring-1 focus:ring-primary focus:outline-none;
    @apply disabled:opacity-50 disabled:cursor-not-allowed;
  }
  
  .btn-secondary {
    background-color: #ffffff;
    color: var(--color-primary-dark);
    @apply border border-border py-2 px-4 rounded-sm transition-colors;
    @apply hover:ring-1 hover:ring-gray-400;
    @apply focus:ring-1 focus:ring-primary focus:outline-none;
    @apply disabled:ring-0 disabled:text-gray-300 disabled:cursor-not-allowed;
  }
  
  .btn-danger {
    @apply bg-white text-red-700 border border-border py-2 px-4 rounded-sm transition-colors;
    @apply hover:bg-red-50 hover:ring-1 hover:ring-red-300;
    @apply focus:bg-red-50 focus:ring-1 focus:ring-red-300 focus:outline-none;
    @apply disabled:opacity-50 disabled:cursor-not-allowed;
  }
  
  .btn-text {
    @apply bg-transparent text-primary py-1 px-2 rounded-sm font-medium transition-colors shadow-none;
    @apply hover:bg-secondary hover:bg-opacity-50;
    @apply focus:ring-2 focus:ring-primary focus:ring-opacity-30 focus:outline-none;
  }
  
  /* Button Sizes */
  .btn-sm {
    @apply text-sm py-1 px-3;
  }
  
  .btn-md {
    @apply py-2 px-4;
  }
  
  .btn-lg {
    @apply text-lg py-3 px-6;
  }
  
  /* Button Loading State */
  .btn-loading {
    @apply opacity-70 cursor-not-allowed;
  }
  
  /* ========== FORMS ========== */
  
  .form-group {
    @apply mb-4;
  }
  
  .form-label {
    @apply block text-sm mb-1 font-medium text-text;
  }
  
  .form-control {
    @apply w-full bg-white border border-border rounded-sm px-3 py-2 transition-colors;
    @apply focus:ring-1 focus:ring-primary focus:ring-opacity-30 focus:border-primary outline-none;
  }
  
  .form-error {
    @apply text-error text-xs mt-1;
  }
  
  .form-help-text {
    @apply text-text-light text-xs mt-1;
  }
  
  /* ========== TABLES ========== */
  
  .table-container {
    @apply w-full overflow-hidden border border-border rounded-md;
  }
  
  .table {
    @apply w-full divide-y divide-border;
  }
  
  .table thead {
    @apply bg-secondary;
  }
  
  .table th {
    @apply py-3 px-4 text-left text-sm font-medium text-text;
  }
  
  .table td {
    @apply py-2 px-4 text-sm text-text whitespace-nowrap;
  }
  
  .table tbody tr {
    @apply bg-white border-b border-border hover:bg-secondary hover:bg-opacity-50;
  }
  
  /* ========== BADGES ========== */
  
  .badge {
    @apply inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium;
  }
  
  .badge-success {
    @apply bg-green-100 text-green-800;
  }
  
  .badge-warning {
    @apply bg-yellow-100 text-yellow-800;
  }
  
  .badge-error {
    @apply bg-red-100 text-red-800;
  }
  
  .badge-info {
    @apply bg-blue-100 text-blue-800;
  }
  
  .badge-primary {
    @apply bg-primary-light text-primary;
  }
  
  /* ========== ALERTS ========== */
  
  .alert {
    @apply p-3 rounded-sm shadow-xl border bg-white;
  }
  
  .alert-success {
    @apply border-l-4 border-l-success;
  }
  
  .alert-error {
    @apply border-l-4 border-l-error;
  }
  
  .alert-warning {
    @apply border-l-4 border-l-warning;
  }
  
  .alert-info {
    @apply border-l-4 border-l-info;
  }
  
  /* ========== PROCESSING INDICATOR ========== */
  
  .processing-indicator {
    position: absolute;
    display: block;
    width: 12px;
    height: 12px;
    border-radius: 50%;
    background-color: #fbbf24;
    box-shadow: 0 0 5px rgba(251, 191, 36, 0.7);
    animation: pulse 2s cubic-bezier(0.4, 0, 0.6, 1) infinite;
    pointer-events: none;
    z-index: 150;
  }
}

/* ============================================================================
   UTILITY CLASSES
   ============================================================================ */

@layer utilities {
  /* ========== SCROLLBARS ========== */
  
  .scrollbar-thin {
    scrollbar-width: thin;
  }
  
  .scrollbar-thin::-webkit-scrollbar {
    width: 8px;
    height: 8px;
  }
  
  .scrollbar-thumb-gray-300::-webkit-scrollbar-thumb {
    background-color: #d1d5db;
    border-radius: 0.25rem;
  }
  
  .scrollbar-track-gray-100::-webkit-scrollbar-track {
    background-color: #f3f4f6;
  }
  
  /* Firefox scrollbar support */
  @supports (scrollbar-width: thin) {
    .scrollbar-thin {
      scrollbar-width: thin;
      scrollbar-color: #d1d5db #f3f4f6;
    }
  }
  
  /* ========== COLUMN RESIZING ========== */
  
  .column-resizing,
  .column-resizing * {
    cursor: col-resize !important;
    user-select: none !important;
  }
  
  .react-resizable-handle {
    position: absolute;
    width: 10px;
    height: 100%;
    bottom: 0;
    right: -5px;
    cursor: col-resize;
    z-index: 30;
  }
}

/* ============================================================================
   GLOBAL SCROLLBAR STYLING
   ============================================================================ */

::-webkit-scrollbar {
  width: 8px;
  height: 8px;
}

::-webkit-scrollbar-track {
  background: #f3f4f6;
}

::-webkit-scrollbar-thumb {
  background: #d1d5db;
  border-radius: 4px;
}

::-webkit-scrollbar-thumb:hover {
  background: #2e2846;
}

/* ============================================================================
   FIREFOX-SPECIFIC FIXES
   ============================================================================ */

@-moz-document url-prefix() {
  table {
    border-collapse: collapse !important;
  }
  
  th,
  td {
    border-right: 1px solid rgba(0, 0, 0, 0.1);
  }
}
